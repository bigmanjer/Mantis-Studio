/* ==========================================================================
   MANTIS Studio — Unified Button System
   ==========================================================================
   All buttons and button-like elements derive their visual language from
   the "Editor" button in the Dashboard Quick Actions section.

   HOW TO MODIFY GLOBALLY:
   -  Adjust the CSS custom properties in the :root block of theme.py
      (e.g. --mantis-button-bg, --mantis-accent, --mantis-shadow-button).
   -  Tweak timing/radius/padding tokens below.
   -  Every st.button, st.link_button, and custom card-action button
      automatically inherits these values.

   ARCHITECTURE:
   1. Base button          → .stButton > button
   2. Primary variant      → .stButton > button[kind="primary"]
   3. Link buttons         → .stLinkButton > a
   4. CTA tile cards       → .mantis-cta-tile
   5. Action cards         → .mantis-action-card
   ========================================================================== */

/* --------------------------------------------------------------------------
   §1  BASE BUTTON — matches the "Editor" Quick-Action button exactly
   -------------------------------------------------------------------------- */
.stButton > button {
    border-radius: 16px !important;
    font-family: 'Inter', sans-serif !important;
    font-weight: 600 !important;
    font-size: 14px !important;
    letter-spacing: 0.01em !important;
    padding: 0.7rem 1.1rem !important;
    border: 1px solid var(--mantis-button-border) !important;
    background: var(--mantis-button-bg) !important;
    color: var(--mantis-text) !important;
    cursor: pointer;
    position: relative;
    /* Smooth transition for hover lift, glow, and color shifts */
    transition: transform 0.18s cubic-bezier(0.22, 1, 0.36, 1),
                border-color 0.18s ease,
                box-shadow 0.18s ease,
                background 0.18s ease !important;
}

/* Hover — subtle lift + accent border + glow */
.stButton > button:hover {
    transform: translateY(-1px);
    border-color: var(--mantis-button-hover-border) !important;
    box-shadow: var(--mantis-shadow-button),
                0 0 12px var(--mantis-accent-glow, rgba(34, 197, 94, 0.18));
}

/* Active / pressed — snap back for tactile feedback */
.stButton > button:active {
    transform: translateY(0) scale(0.98);
    box-shadow: none;
    transition-duration: 0.06s !important;
}

/* Focus — visible ring for keyboard navigation (a11y) */
.stButton > button:focus-visible {
    outline: 2px solid var(--mantis-accent, #22c55e) !important;
    outline-offset: 2px !important;
    box-shadow: 0 0 0 4px var(--mantis-accent-glow, rgba(34, 197, 94, 0.25)) !important;
}

/* Remove default Streamlit focus ring that clashes */
.stButton > button:focus {
    outline: none !important;
    box-shadow: none !important;
}

/* Disabled — reduced opacity, no pointer events */
.stButton > button:disabled,
.stButton > button[disabled] {
    opacity: 0.45 !important;
    cursor: not-allowed !important;
    transform: none !important;
    box-shadow: none !important;
}

/* --------------------------------------------------------------------------
   §2  PRIMARY BUTTON — green gradient variant
   -------------------------------------------------------------------------- */
.stButton > button[kind="primary"] {
    background: var(--mantis-primary-bg) !important;
    border-color: var(--mantis-primary-border) !important;
    box-shadow: var(--mantis-shadow-button);
    color: #ffffff !important;
}

.stButton > button[kind="primary"]:hover {
    border-color: var(--mantis-primary-hover-border) !important;
    box-shadow: var(--mantis-shadow-strong),
                0 0 16px var(--mantis-accent-glow, rgba(34, 197, 94, 0.25));
}

.stButton > button[kind="primary"]:active {
    transform: translateY(0) scale(0.98);
    box-shadow: none;
}

.stButton > button[kind="primary"]:focus-visible {
    outline: 2px solid var(--mantis-accent, #22c55e) !important;
    outline-offset: 2px !important;
    box-shadow: 0 0 0 4px var(--mantis-accent-glow, rgba(34, 197, 94, 0.25)) !important;
}

/* Secondary explicit (same as base, for parity) */
.stButton > button[kind="secondary"] {
    background: var(--mantis-button-bg) !important;
}

/* --------------------------------------------------------------------------
   §3  LINK BUTTONS — visually match regular buttons
   -------------------------------------------------------------------------- */
.stLinkButton > a {
    border-radius: 16px !important;
    font-family: 'Inter', sans-serif !important;
    font-weight: 600 !important;
    font-size: 14px !important;
    letter-spacing: 0.01em !important;
    padding: 0.7rem 1.1rem !important;
    border: 1px solid var(--mantis-button-border) !important;
    background: var(--mantis-button-bg) !important;
    color: var(--mantis-text) !important;
    text-decoration: none !important;
    display: inline-flex !important;
    align-items: center !important;
    justify-content: center !important;
    cursor: pointer;
    transition: transform 0.18s cubic-bezier(0.22, 1, 0.36, 1),
                border-color 0.18s ease,
                box-shadow 0.18s ease,
                background 0.18s ease !important;
}

.stLinkButton > a:hover {
    transform: translateY(-1px);
    border-color: var(--mantis-button-hover-border) !important;
    box-shadow: var(--mantis-shadow-button),
                0 0 12px var(--mantis-accent-glow, rgba(34, 197, 94, 0.18));
    text-decoration: none !important;
}

.stLinkButton > a:active {
    transform: translateY(0) scale(0.98);
    box-shadow: none;
    transition-duration: 0.06s !important;
}

.stLinkButton > a:focus-visible {
    outline: 2px solid var(--mantis-accent, #22c55e) !important;
    outline-offset: 2px !important;
    box-shadow: 0 0 0 4px var(--mantis-accent-glow, rgba(34, 197, 94, 0.25)) !important;
}

/* --------------------------------------------------------------------------
   §4  CTA TILE — card-style button with icon + subtitle (Quick Actions)
   -------------------------------------------------------------------------- */
.mantis-cta-tile {
    padding: 16px 18px;
    border-radius: 16px;
    border: 1px solid var(--mantis-border, var(--mantis-card-border));
    background: var(--mantis-surface, var(--mantis-card-bg));
    transition: border-color 0.18s ease,
                box-shadow 0.18s ease,
                transform 0.18s cubic-bezier(0.22, 1, 0.36, 1);
}

.mantis-cta-tile:hover {
    border-color: var(--mantis-accent-glow, rgba(34, 197, 94, 0.35));
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.15);
    transform: translateY(-1px);
}

.mantis-cta-tile .mantis-cta-icon {
    font-size: 22px;
    margin-bottom: 6px;
    line-height: 1;
}

.mantis-cta-tile .mantis-cta-title {
    font-weight: 600;
    font-size: 15px;
    color: var(--mantis-text);
}

.mantis-cta-tile .mantis-cta-body {
    font-size: 13px;
    color: var(--mantis-muted, var(--mantis-text-muted));
    margin-top: 4px;
    line-height: 1.4;
}

.mantis-cta-tile .mantis-cta-subtitle {
    font-size: 12px;
    color: var(--mantis-muted, var(--mantis-text-muted));
    margin-top: 2px;
    line-height: 1.4;
}

/* --------------------------------------------------------------------------
   §5  ACTION CARD — enhanced card with title, description, and action button
   -------------------------------------------------------------------------- */
.mantis-action-card {
    padding: 18px 20px;
    border-radius: 18px;
    border: 1px solid var(--mantis-card-border, var(--mantis-border));
    background: var(--mantis-card-bg, var(--mantis-surface));
    box-shadow: var(--mantis-shadow-strong, 0 14px 32px rgba(0, 0, 0, 0.4));
    transition: border-color 0.18s ease,
                box-shadow 0.18s ease;
}

.mantis-action-card:hover {
    border-color: var(--mantis-accent-glow, rgba(34, 197, 94, 0.35));
}

.mantis-action-card .mantis-action-card-title {
    font-weight: 700;
    font-size: 16px;
    margin-bottom: 4px;
}

.mantis-action-card .mantis-action-card-desc {
    font-size: 13px;
    color: var(--mantis-muted, var(--mantis-text-muted));
    margin-bottom: 12px;
    line-height: 1.4;
}

/* --------------------------------------------------------------------------
   §6  BUTTON HIERARCHY — unified with navigation buttons theme
   --------------------------------------------------------------------------
   All action-category buttons now derive their visual language from the
   same CSS custom properties used by the navigation / base button system
   (§1-§2), ensuring consistent look-and-feel across the entire app.
   -------------------------------------------------------------------------- */

/* PRIMARY — main actions (Save, Create, Confirm) */
.mantis-btn-primary > button {
    background: var(--mantis-primary-bg) !important;
    color: #ffffff !important;
    border-radius: 16px !important;
    font-weight: 600 !important;
    border: 1px solid var(--mantis-primary-border) !important;
    box-shadow: var(--mantis-shadow-button);
    transition: transform 0.18s cubic-bezier(0.22, 1, 0.36, 1),
                border-color 0.18s ease,
                box-shadow 0.18s ease,
                background 0.18s ease !important;
}
.mantis-btn-primary > button:hover {
    transform: translateY(-1px);
    border-color: var(--mantis-primary-hover-border) !important;
    box-shadow: var(--mantis-shadow-strong),
                0 0 16px var(--mantis-accent-glow, rgba(34, 197, 94, 0.25));
}

/* SECONDARY — tool actions (Open Editor, Open Memory, Export) */
.mantis-btn-secondary > button {
    background: var(--mantis-button-bg) !important;
    color: var(--mantis-text) !important;
    border: 1px solid var(--mantis-button-border) !important;
    border-radius: 16px !important;
    font-weight: 600 !important;
    transition: transform 0.18s cubic-bezier(0.22, 1, 0.36, 1),
                border-color 0.18s ease,
                box-shadow 0.18s ease,
                background 0.18s ease !important;
}
.mantis-btn-secondary > button:hover {
    transform: translateY(-1px);
    border-color: var(--mantis-button-hover-border) !important;
    box-shadow: var(--mantis-shadow-button),
                0 0 12px var(--mantis-accent-glow, rgba(34, 197, 94, 0.18));
}

/* GHOST — sidebar/navigation buttons */
.mantis-btn-ghost > button {
    background: var(--mantis-surface-alt, transparent) !important;
    color: var(--mantis-text) !important;
    border: 1px solid var(--mantis-card-border) !important;
    border-radius: 16px !important;
    font-weight: 600 !important;
    transition: transform 0.18s cubic-bezier(0.22, 1, 0.36, 1),
                border-color 0.18s ease,
                box-shadow 0.18s ease,
                background 0.18s ease !important;
}
.mantis-btn-ghost > button:hover {
    border-color: var(--mantis-accent-glow, rgba(34, 197, 94, 0.35)) !important;
    box-shadow: 0 0 0 1px var(--mantis-accent-glow);
    transform: none;
}

/* DANGER — destructive actions (Delete, Reset) */
.mantis-btn-danger > button {
    background: var(--mantis-button-bg) !important;
    color: var(--mantis-warning, #e53935) !important;
    border: 1px solid var(--mantis-button-border) !important;
    border-radius: 16px !important;
    font-weight: 600 !important;
    transition: transform 0.18s cubic-bezier(0.22, 1, 0.36, 1),
                border-color 0.18s ease,
                box-shadow 0.18s ease,
                background 0.18s ease !important;
}
.mantis-btn-danger > button:hover {
    border-color: var(--mantis-warning, #e53935) !important;
    transform: translateY(-1px);
    box-shadow: var(--mantis-shadow-button);
}

/* --------------------------------------------------------------------------
   §7  REDUCED MOTION — respect user preference (a11y)
   -------------------------------------------------------------------------- */
@media (prefers-reduced-motion: reduce) {
    .stButton > button,
    .stLinkButton > a,
    .mantis-cta-tile,
    .mantis-action-card,
    .mantis-btn-primary > button,
    .mantis-btn-secondary > button,
    .mantis-btn-ghost > button,
    .mantis-btn-danger > button {
        transition-duration: 0.01ms !important;
        transform: none !important;
    }

    .stButton > button:hover,
    .stLinkButton > a:hover,
    .mantis-cta-tile:hover,
    .mantis-btn-primary > button:hover,
    .mantis-btn-secondary > button:hover,
    .mantis-btn-danger > button:hover {
        transform: none !important;
    }

    .stButton > button:active,
    .stLinkButton > a:active {
        transform: none !important;
    }
}
